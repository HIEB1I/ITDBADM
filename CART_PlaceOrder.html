<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Check Out ‒ KALYE WEST</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
  :root {
    --nav-height: 110px;
    --brand-black: #000;
    --light-gray: #f5f5f7;
    --mid-gray: #dadada;
    font-family: Arial, Helvetica, sans-serif;
  }

  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html, body {
    height: 100%;
    display: flex;
    flex-direction: column;
    }

 .checkout-container {
    flex: 1;
 }


  body {
    background: #fff;
    color: var(--brand-black);
  }

  header {
    height: var(--nav-height);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 24px;
    border-bottom: 1px solid var(--mid-gray);
  }

  .logo {
    flex: 1;
    display: flex;
    justify-content: center;
    margin: 20px 0;
  }

  .logo img {
    width: 150px;
    margin-left: 100px;
  }

  .utils {
    display: flex;
    align-items: center;
    gap: 20px;
    
  }

  .checkout-container {
    display: flex;
    justify-content: space-between;
    max-width: 1200px;
    margin: 40px auto;
    padding: 0 40px;
  }

  .form-section {
    width: 60%;
  }

  .form-section h2 {
    font-size: 28px;
    margin-bottom: 20px;
  }

  .form-group {
    margin-bottom: 20px;
  }

  input,
  textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid var(--mid-gray);
    border-radius: 4px;
  }

  .inline-inputs {
    display: flex;
    gap: 10px;
  }

  .inline-inputs input {
    flex: 1;
  }

  .payment-options {
    border: 1px solid var(--mid-gray);
    border-radius: 5px;
    overflow: hidden;
  }

  .payment-options label {
    display: block;
    padding: 15px;
    border-bottom: 1px solid var(--mid-gray);
    cursor: pointer;
  }

  .payment-options label:last-child {
    border-bottom: none;
  }

  .payment-options input[type="radio"] {
    margin-right: 10px;
  }

  .summary-section {
    width: 50%;
    border-left: 1px solid var(--mid-gray);
    padding-left: 40px;
  }

  .summary-section h3 {
    margin-bottom: 20px;
  }

  .item {
    display: flex;
    margin-bottom: 15px;
  }

  .item img {
    width: 60px;
    height: 60px;
    object-fit: cover;
    margin-right: 15px;
  }

  .item-details {
    font-size: 14px;
  }

  .total-line {
    text-align: right;
    font-size: 18px;
    margin-top: 20px;
  }

  .place-order-btn {
    background: #004b84;
    color: white;
    border: none;
    padding: 14px;
    width: 100%;
    cursor: pointer;
    font-size: 16px;
  }

  #selectedPayment {
    background: var(--light-gray);
    color: #555;
    padding: 12px;
    border-radius: 5px;
    text-align: center;
    margin-top: 10px;
    font-weight: bold;
    cursor: default;
  }

  footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 40px;
    border-top: 1px solid #ccc;
    font-size: 14px;
  }

  footer .social i {
    margin: 0 10px;
    font-size: 18px;
    cursor: pointer;
    color: black
  }

  i {
    color: black !important;
  }

</style>

</head>
<body>
<header>
  <div class="logo">
    <a href="HOME_Homepage.html"><img src="Logos/KW Logo.png" alt="KALYE WEST"></a>
  </div>
  <div class="utils">
    <select>
        <option selected>Php</option>
        <option>USD</option>
        <option>KRW</option>
    </select>
    <a href="PROFILE_User.html"><i class="fa-regular fa-user"></i></a>
    <a href="CART_ViewCart.html"><i class="fa-solid fa-bag-shopping"></i></a>
  </div>
</header>


<div class="checkout-container">
  <div class="form-section">
    <h2>Check out</h2>
    <div class="form-group">Account<br><strong id="userEmail">user@example.com</strong></div>
    <div class="form-group inline-inputs">
      <input type="text" placeholder="First name">
      <input type="text" placeholder="Last name">
    </div>
    <div class="form-group">
      <textarea rows="3" placeholder="Address"></textarea>
    </div>
    <div class="form-group inline-inputs">
    <input type="text" id="postalCode" placeholder="Postal Code">
    <input type="text" id="city" placeholder="City">
    <input type="text" id="region" placeholder="Region">
    <input type="text" id="contact" placeholder="Contact Number">
    </div>

    <div class="form-group">
      <strong>Payment</strong><br>
      <small>All transactions are secure and encrypted.</small>
      <div class="payment-options">
        <label><input type="radio" name="payment" value="bank"> G-CASH/BANK</label>
        <label><input type="radio" name="payment" value="cod" checked> Cash on Delivery (COD)</label>
      </div>
    </div>
    <p id="selectedPayment" style="background: var(--light-gray); color: #555; padding: 12px; border-radius: 5px; text-align: center; margin-top: 10px; font-weight: bold; cursor: default;">Cash on Delivery</p>
  </div>

  <div class="summary-section">
    <h3>Order Summary</h3>
    <div id="orderItems"></div>
    <div class="total-line">Total: <strong id="totalPrice">₱0.00</strong></div>
    <button class="place-order-btn" onclick="placeOrder()">Place order</button>

  </div>
</div>

<footer>
  <div class="social">
    <a href="https://facebook.com" target="_blank"><i class="fa-brands fa-facebook"></i></a>
    <a href="https://instagram.com" target="_blank"><i class="fa-brands fa-instagram"></i></a>
    <a href="https://tiktok.com" target="_blank"><i class="fa-brands fa-tiktok"></i></a>
  </div>
  <div>2025, KALYE WEST</div>
</footer>

<script>
  const email = localStorage.getItem("userEmail") || "user@example.com";
  document.getElementById("userEmail").textContent = email;

  const orderItemsContainer = document.getElementById("orderItems");
  const totalPriceDisplay = document.getElementById("totalPrice");
  const selectedPaymentDisplay = document.getElementById("selectedPayment");

  function formatPrice(num) {
    return `₱${num.toLocaleString('en-PH', { minimumFractionDigits: 2 })}`;
  }

  function renderOrderSummary() {
    const cart = JSON.parse(localStorage.getItem("cart")) || [];
    let total = 0;
    orderItemsContainer.innerHTML = "";
    cart.forEach(item => {
      const subtotal = item.quantity * parseFloat(item.price.replace(/[₱,]/g, ''));
      total += subtotal;
      orderItemsContainer.innerHTML += `
        <div class="item">
          <img src="${item.image}" alt="${item.title}">
          <div class="item-details">
            ${item.title}<br>
            Size: ${item.size}<br>
            ${item.price} × ${item.quantity}
          </div>
        </div>`;
    });
    totalPriceDisplay.textContent = formatPrice(total);
  }

  // Update payment method text
  const paymentRadios = document.querySelectorAll('input[name="payment"]');
  function updatePaymentIndicator() {
    const selected = document.querySelector('input[name="payment"]:checked');
    if (selected) {
      selectedPaymentDisplay.textContent = selected.nextSibling.textContent.trim();
    }
  }
  paymentRadios.forEach(r => r.addEventListener("change", updatePaymentIndicator));
  updatePaymentIndicator(); // initialize on load

function placeOrder() {
  const cart = JSON.parse(localStorage.getItem("cart")) || [];
  const orders = JSON.parse(localStorage.getItem("orders")) || [];

  // Get address details
  const postal = document.getElementById('postalCode').value;
  const city = document.getElementById('city').value;
  const region = document.getElementById('region').value;
  const contact = document.getElementById('contact').value;

  const newOrders = cart.map(item => ({
    image: item.image,
    title: item.title,
    size: item.size,
    qty: item.quantity,
    price: `₱${(parseFloat(item.price.replace(/[₱,]/g, '')) * item.quantity).toLocaleString()}`,
    status: 'To Ship',
    expected: 'July 25, 2025',
    postal: postal,
    city: city,
    region: region
  }));

  const updatedOrders = [...orders, ...newOrders];
  localStorage.setItem("orders", JSON.stringify(updatedOrders));

  localStorage.removeItem("cart"); // optional
  window.location.href = "CART_OrderConfirmation.html";
}



  renderOrderSummary();
</script>

</body>
</html>
